(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var r in t)e.o(t,r)&&!e.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:t[r]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.React,t=window.wp.element,r=window.wp.i18n,n=window.wp.components,c=window.wp.data,o=window.wp.apiFetch;var l=e.n(o);function s(){const e=(0,c.useSelect)((e=>e("core/notices").getNotices().filter((e=>"snackbar"===e.type))),[]),t=(0,c.useSelect)((e=>e("core/notices").getNotices().filter((e=>"default"===e.type))),[]),{removeNotice:r}=(0,c.useDispatch)("core/notices");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.NoticeList,{className:"components-editor-notices__default",notices:t,onRemove:r}),(0,a.createElement)("div",{className:"swpsp-notice-wrap"},(0,a.createElement)(n.SnackbarList,{className:"components-editor-notices__snackbar",notices:e,onRemove:r})))}const i=window.wp.notices,m=document.querySelector(".solidwp-performance-settings-main");m&&(0,t.createRoot)(m).render((0,a.createElement)((()=>{const{createErrorNotice:e,createSuccessNotice:t}=(0,c.useDispatch)(i.store),[o,m]=(0,a.useState)(swspParams.settings);(0,a.useEffect)((()=>{(async()=>{const{solid_performance_settings:e}=await l()({path:"/wp/v2/settings"});m(e)})().catch((a=>{e((0,r.__)("Error: WordPress settings API not working. Please reload and try again.","solid-performance")),console.error(a)}))}),[]);const d=async a=>{await l()({path:"/solid-performance/v1/page/clear",method:"POST"}).catch((a=>{e((0,r.__)("Error Saving Settings","solid-performance"),{type:"snackbar"}),console.error(a)})),t((0,r.__)("Cache Cleared","solid-performance"),{type:"snackbar"})},p=async a=>{const n=await l()({path:"/solid-performance/v1/page/regenerate",method:"POST"}).catch((a=>{e((0,r.__)("Error Regenerating","solid-performance"),{type:"snackbar"}),console.error(a)}));if("solid_performance_advanced_cache_regenerated"!==n.code)e((0,r.__)("Error Regenerating","solid-performance"),{type:"snackbar"}),console.error(n);else{t((0,r.__)("advanced-cache.php Regenerated","solid-performance"),{type:"snackbar"});const e=document.getElementById("solidwp-performance-inactive");e&&e.remove()}},h=e=>{m({...o,...e,page_cache:{...o?.page_cache,...e?.page_cache}})},g=[{name:"basic",title:(0,r.__)("Basic","solid-performance"),className:"basic-tab"},{name:"advanced",title:(0,r.__)("Advanced","solid-performance"),className:"advanced-tab"}];return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("h1",null,(0,r.__)("Performance Settings","solid-performance")),(0,a.createElement)(s,null),(0,a.createElement)("form",{className:"swpsp-settings-form",onSubmit:async a=>{a.preventDefault();const{solid_performance_settings:n}=await l()({path:"/wp/v2/settings",method:"POST",data:{solid_performance_settings:{...o}}}).catch((a=>{e((0,r.__)("Error Saving Settings","solid-performance"),{type:"snackbar"}),console.error(a)}));n&&(t((0,r.__)("Settings Saved","solid-performance"),{type:"snackbar"}),m(n))}},(0,a.createElement)(n.TabPanel,{className:"swpsp-settings-section-tabs",orientation:"vertical",tabs:g},(e=>{switch(e.name){case"basic":return(0,a.createElement)(n.Card,null,(0,a.createElement)(n.CardHeader,null,(0,a.createElement)("header",null,(0,a.createElement)("h2",null,(0,r.__)("Basic Settings","solid-performance")),o?.page_cache?.enabled&&(0,a.createElement)(n.Button,{variant:"secondary",onClick:d},(0,r.__)("Purge Page Cache","solid-performance")),(0,a.createElement)(n.Button,{variant:"text",href:"https://go.solidwp.com/performance-page-caching",icon:()=>(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,a.createElement)("path",{d:"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z"})),target:"_blank",size:"small",showTooltip:!0,label:"View external documentation"}))),(0,a.createElement)(n.CardBody,null,(0,a.createElement)(n.ToggleControl,{label:(0,r.__)("Enable Page Cache","solid-performance"),checked:o?.page_cache?.enabled||!1,className:"swpsp-large-toggle",onChange:e=>h({page_cache:{enabled:e}})}),(0,a.createElement)("p",{className:"submit"},(0,a.createElement)(n.Button,{variant:"primary",type:"submit"},(0,r.__)("Save","solid-performance")))));case"advanced":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.Card,null,(0,a.createElement)(n.CardHeader,null,(0,a.createElement)("header",null,(0,a.createElement)("h2",null,(0,r.__)("Advanced Settings","solid-performance")),(0,a.createElement)(n.Button,{variant:"text",href:"https://go.solidwp.com/performance-exclusions",icon:()=>(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,a.createElement)("path",{d:"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z"})),target:"_blank",size:"small",showTooltip:!0,label:"View external documentation"}))),(0,a.createElement)(n.CardBody,null,(0,a.createElement)(n.TextareaControl,{label:(0,r.__)("Cache Exclusions","solid-performance"),help:(0,r.__)("Enter URLs for pages, or wildcard exclusion patterns to exclude from the cache, one per line.","solid-performance"),placeholder:(0,r.__)("/example/*","solid-performance"),value:o?.page_cache?.exclusions?.join("\n")||"",onChange:e=>h({page_cache:{exclusions:e.split("\n")}})}),(0,a.createElement)("p",{className:"submit"},(0,a.createElement)(n.Button,{variant:"primary",type:"submit"},(0,r.__)("Save","solid-performance"))))),(0,a.createElement)(n.Card,null,(0,a.createElement)(n.CardHeader,null,(0,a.createElement)("header",null,(0,a.createElement)("h2",null,(0,r.__)("Debug","solid-performance")),(0,a.createElement)(n.Button,{variant:"text",href:"https://go.solidwp.com/performance-directory",icon:()=>(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,a.createElement)("path",{d:"M12 4.75a7.25 7.25 0 100 14.5 7.25 7.25 0 000-14.5zM3.25 12a8.75 8.75 0 1117.5 0 8.75 8.75 0 01-17.5 0zM12 8.75a1.5 1.5 0 01.167 2.99c-.465.052-.917.44-.917 1.01V14h1.5v-.845A3 3 0 109 10.25h1.5a1.5 1.5 0 011.5-1.5zM11.25 15v1.5h1.5V15h-1.5z"})),target:"_blank",size:"small",showTooltip:!0,label:"View external documentation"}))),(0,a.createElement)(n.CardBody,null,(0,a.createElement)(n.ToggleControl,{label:(0,r.__)("Enable Debug Mode","solid-performance"),help:(0,r.__)("Enable debug mode to log cache status and performance information.","solid-performance"),checked:o?.page_cache?.debug||!1,onChange:e=>h({page_cache:{debug:e}})}),(0,a.createElement)(n.TextControl,{label:(0,r.__)("Cache File Directory","solid-performance"),help:(0,r.__)("The directory where cache files are stored on the server.","solid-performance"),value:swspParams?.cache_path||"",onChange:()=>{},readOnly:!0}),(0,a.createElement)(n.BaseControl,null,(0,a.createElement)(n.Button,{variant:"secondary",onClick:p},(0,r.__)("Regenerate the advanced-cache.php file","solid-performance"))),(0,a.createElement)("p",{className:"submit"},(0,a.createElement)(n.Button,{variant:"primary",type:"submit"},(0,r.__)("Save","solid-performance"))))))}}))))}),null))})();